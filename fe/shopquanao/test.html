<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Hi·ªáu ·ª©ng bay v√†o gi·ªè h√†ng</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    .product {
      display: inline-block;
      position: relative;
    }
    .product img {
      width: 120px;
      border-radius: 8px;
    }
    .cart {
      position: fixed;
      top: 20px;
      right: 20px;
      font-size: 32px;
      cursor: pointer;
    }

    /* Clone bay */
    .flying-img {
      position: fixed;
      width: 120px;
      height: auto;
      border-radius: 8px;
      z-index: 9999;
      transition: all 1s ease-in-out;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="cart">üõí</div>

  <div class="product">
    <img src="https://via.placeholder.com/120" alt="S·∫£n ph·∫©m">
    <button onclick="addToCart(this)">Th√™m gi·ªè h√†ng</button>
  </div>

  <script>
    function addToCart(button) {
      let product = button.parentElement;
      let img = product.querySelector("img");
      let cart = document.querySelector(".cart");

      // L·∫•y v·ªã tr√≠ ·∫£nh v√† gi·ªè h√†ng
      let imgRect = img.getBoundingClientRect();
      let cartRect = cart.getBoundingClientRect();

      // T·∫°o ·∫£nh bay
      let flyingImg = img.cloneNode(true);
      flyingImg.classList.add("flying-img");
      document.body.appendChild(flyingImg);

      // ƒê·∫∑t v·ªã tr√≠ ban ƒë·∫ßu
      flyingImg.style.left = imgRect.left + "px";
      flyingImg.style.top = imgRect.top + "px";

      // B·∫Øt bu·ªôc browser reflow ƒë·ªÉ transition ho·∫°t ƒë·ªông
      requestAnimationFrame(() => {
        flyingImg.style.left = cartRect.left + "px";
        flyingImg.style.top = cartRect.top + "px";
        flyingImg.style.width = "20px";
        flyingImg.style.opacity = "0.5";
      });

      // X√≥a sau khi animation k·∫øt th√∫c
      flyingImg.addEventListener("transitionend", () => {
        flyingImg.remove();
      });
    }
  </script>
</body>
</html>
